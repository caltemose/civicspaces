extends ../layout

block title
  title #{sitetitle} | Edit Space Details

block content

  div.container

    h1 Edit Space Details

    p Edit your space details below. You can increase your space's popularity by including more details and uploading several good-quality photos.

    p.note
      small *Required fields.

    form(method="POST")

      input(type="hidden" name="_id" value=space._id)

      div.section

        if noAddressZip
          div.alert.alert-danger Please ensure that you've provided a valid address and zip code when making changes to a space.

        h2 Location and Contact Info

        div.row
          div.col-md-6

            label
              | *Address: 
              input.form-control(name="address" type="text" maxlength="128" data-validate-rules="required" value="#{space.address}")
              span

            label
              | City: 
              input.form-control(name="city" type="text" maxlength="128" value="#{space.city}")

            label
              | *Zip Code: 
              input.form-control(name="zip" type="text" maxlength="10" data-validate-rules="required|zip" value="#{space.zip}")
              span

            if space.geo
              if space.geo.lat
                input(type="hidden" value="#{space.geo.lat}" name="lat")
              if space.geo.lng
                input(type="hidden" value="#{space.geo.lng}" name="lng")
          
            label
              | *Contact Email: 
              input.form-control(name="contact" type="text" value="#{space.contact}" disabled) 


      div.section

        h2 Size and Type

        div.row

          //- @TODO fix the ENUM/SELECT menu intelligence for type, leaseLength, etc

          div.col-sm-6
            label 
              | Type of space: 
              select.form-control(name="type")
                option(value="") Select one...
                each val in ['Storefront', 'Office Only', 'Loft/Mixed Use', 'Land/Property']
                  if (space.type == val)
                    option(value=val selected)= val
                  else
                    option(value=val)= val
                
            label 
              | Preferred length of lease:
              select.form-control(name="leaseLength") 
                option(value="") None
                each val in ['Single-day Use', 'Multi-day Use', 'Multi-week Use', 'Long-term Use']
                  if (space.leaseLength == val)
                    option(value=val selected)= val
                  else
                    option(value=val)= val
                

          div.col-sm-6
            label
              | Area: 
              small (square feet) 
              input.form-control(type="text" size="5" name="area" maxlength="5" value=space.area) 

            label
              | Maximum occupancy:
              input.form-control(type="text" size="5" name="maxOccupants" maxlength="5" value=space.maxOccupants) 

          

      div.section

        h2 Allowed Uses

        div.row
          div.col-sm-6
            label Allow on premises:
  
            div.grouped
              label
                if space.allowed.foodBev
                  input(type="checkbox" name="allowedFood" checked="checked")
                else
                  input(type="checkbox" name="allowedFood")
                |  Food &amp; beverage

              label
                if space.allowed.alcohol
                  input(type="checkbox" name="allowedAlcohol" checked="checked")
                else
                  input(type="checkbox" name="allowedAlcohol")
                |  Alcohol 

              label
                if space.allowed.music
                  input(type="checkbox" name="allowedMusic" checked="checked")
                else
                  input(type="checkbox" name="allowedMusic")
                |  Loud music/noise 
                small (with owner approval)

          div.col-sm-6
            label Allowed modifications of space:

            div.grouped
              label
                if space.allowed.modifications == 'None'
                  input(type="radio" name="allowedMods" value="None" checked="checked") 
                else
                  input(type="radio" name="allowedMods" value="None") 
                |  None

              label
                if space.allowed.modifications == 'Non-intrusive'
                  input(type="radio" name="allowedMods" value="Non-intrusive" checked="checked") 
                else 
                  input(type="radio" name="allowedMods" value="Non-intrusive") 
                |  Non-intrusive only 
                small (wall hangings, for example)

              label
                if space.allowed.modifications == 'Intrusive'
                  input(type="radio" name="allowedMods" value="Intrusive" checked="checked") 
                else
                  input(type="radio" name="allowedMods" value="Intrusive") 
                |  Intrusive  
                small (with owner's permission)


      div.section

        h2 Amenities

        div.row
          div.col-sm-4
            div.grouped 
              label
                if space.amenities.wifi
                  input(type="checkbox" name="wifi" checked="checked") 
                else
                  input(type="checkbox" name="wifi") 
                |  Wireless internet

              label
                if space.amenities.parkingOnSite
                  input(type="checkbox" name="parking" checked="checked") 
                else
                  input(type="checkbox" name="parking") 
                |  On-site parking

              label
                if space.amenities.handicap
                  input(type="checkbox" name="handicap" checked="checked") 
                else
                  input(type="checkbox" name="handicap") 
                |  Handicap Access

              label
                if space.amenities.furnished
                  input(type="checkbox" name="furnished" checked="checked") 
                else
                  input(type="checkbox" name="furnished") 
                |  This space is furnished

          div.col-sm-4
            label Bathroom facilities:

            div.grouped
              label
                if space.amenities.bathroom == 'None'
                  input(type="radio" name="bathroom" value="None" checked="checked") 
                else
                  input(type="radio" name="bathroom" value="None") 
                |  None
              label
                if space.amenities.bathroom == 'Single'
                  input(type="radio" name="bathroom" value="Single" checked="checked") 
                else
                  input(type="radio" name="bathroom" value="Single") 
                |  Single bathroom
              label
                if space.amenities.bathroom == 'Multiple'
                  input(type="radio" name="bathroom" value="Multiple" checked="checked") 
                else
                  input(type="radio" name="bathroom" value="Multiple") 
                |  Multiple bathrooms

          div.col-sm-4
            label Kitchen facilities:

            div.grouped
              label
                if space.amenities.kitchen == 'None'
                  input(type="radio" name="kitchen" value="None" checked="checked") 
                else
                  input(type="radio" name="kitchen" value="None") 
                |  None
              label
                if space.amenities.kitchen == 'Partial'
                else
                  input(type="radio" name="kitchen" value="Partial") 
                |  Partial kitchen
              label
                if space.amenities.kitchen == 'Full'
                  input(type="radio" name="kitchen" value="Full" checked="checked") 
                else
                  input(type="radio" name="kitchen" value="Full") 
                |  Full kitchen


      div.section

        h2 Description
        
        p.not-too-wide Enter your description below. You may wish to include details about allowed uses, amenities or other details.

        textarea.form-control.not-too-wide(name="description" rows="10" cols="20")= space.description

      //- div.section

      //-   h2 Photos

      input.btn.btn-success(type="submit" name="submit" value="Save Listing") 

block scripts
  script(src='https://maps.googleapis.com/maps/api/js?sensor=false')
  script(src="/assets/js/edit-space.js")
  //- script.
  //-   cs.find.initialize('mapview', 33.7724417, -84.3279093);
  //-   google.maps.event.addDomListener(window, 'load', cs.find.loadMaps);
  //-     